<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
attribute vec4 vNormal;
varying vec3 N, L, E;
uniform mat4 uCameraMatrix;
uniform mat4 uProjectionMatrix;
uniform mat4 uModelMatrix;
uniform mat4 uNormalMatrix;
uniform int ifNormalize;

uniform vec4 lightPosition;
void main()
{
    vec4 ModelPosition=uModelMatrix * vPosition;
    vec4 EyePosition= uCameraMatrix *ModelPosition;
    L = normalize( lightPosition.xyz - ModelPosition.xyz );
    E =  -normalize(EyePosition.xyz);
    if(ifNormalize==1)
        N = normalize( (uNormalMatrix*vNormal).xyz);
    else
        N = (uNormalMatrix*vNormal).xyz;

    gl_Position = uProjectionMatrix *EyePosition;

}
</script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;
        uniform vec4 ambientProduct;
        uniform vec4 diffuseProduct;
        uniform vec4 specularProduct;
        uniform float shininess;
        varying vec3 N, L, E;

        void main()
        {
            vec4 fColor;

            vec3 H = normalize( L + E );
            vec4 ambient = ambientProduct;

            float Kd = max( dot(L, N), 0.0 );
            vec4  diffuse = Kd*diffuseProduct;

            float Ks = pow( max(dot(N, H), 0.0), shininess );
            vec4  specular = Ks * specularProduct;

            if( dot(L, N) < 0.0 ) specular = vec4(0.0, 0.0, 0.0, 1.0);

            fColor = ambient + diffuse +specular;
            fColor.a = 1.0;

            gl_FragColor = fColor;
        }

</script>
    <script id="vertex-shader2" type="x-shader/x-vertex">
        attribute  vec4 vPosition;
    attribute  vec3 vNormal;
    varying vec4 fColor;

    uniform mat4 uCameraMatrix;
    uniform mat4 uProjectionMatrix;
    uniform mat4 uModelMatrix;
    uniform mat4 uNormalMatrix;
    uniform vec4 lightPosition;
    uniform vec4 ambientProduct;
    uniform vec4 diffuseProduct;
    uniform vec4 specularProduct;
    uniform float shininess;
void main()
    {


        vec3 pos = -(uModelMatrix * vPosition).xyz;

        //fixed light postion

        vec3 light = lightPosition.xyz;
        vec3 L = normalize( light - pos );


        vec3 E = normalize( -pos );
        vec3 H = normalize( L + E );

        vec4 NN = vec4(vNormal,0);

        // Transform vertex normal into eye coordinates

        vec3 N = normalize( (uModelMatrix*NN).xyz);

        // Compute terms in the illumination equation
        vec4 ambient = ambientProduct;

        float Kd = max( dot(L, N), 0.0 );
        vec4  diffuse = Kd*diffuseProduct;

        float Ks = pow( max(dot(N, H), 0.0), shininess );
        vec4  specular = Ks * specularProduct;

        if( dot(L, N) < 0.0 ) {
        specular = vec4(0.0, 0.0, 0.0, 1.0);
        }

        gl_Position = uProjectionMatrix * uCameraMatrix * uModelMatrix * vPosition;
        fColor = ambient + diffuse +specular;

        fColor.a = 1.0;
    }
    </script>

    <script id="fragment-shader2" type="x-shader/x-fragment">

        precision mediump float;


    varying vec4 fColor;

    void
    main()
    {
        gl_FragColor = fColor;
    }
    </script>
    <style>
        body {
            margin: 0
        }

        .app {
            margin: 0 auto;
        }

        #gl-canvas {
            display: block;
            margin: 0 auto;
            min-width: 1200px;
            min-height: 675px;
            width: 100vw;
            height:100vh;
        }
    </style>
</head>

<body>
    <div id="camera"  class="app">
        <canvas id="gl-canvas">
                    Oops ... your browser doesn't support the HTML5 canvas element
         </canvas>
    </div>
</body>

</html>